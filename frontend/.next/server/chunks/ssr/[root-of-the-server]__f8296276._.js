module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},45056,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].React},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},31699,(a,b,c)=>{"use strict";b.exports=a.r(18622)},57850,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactJsxRuntime},14102,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"https://logistics-system-oq8b.onrender.com";a.s(["API_URL",0,b])},49047,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(73951),e=a.i(93609),f=a.i(14102);function g(){let a=(0,e.useRouter)(),g=(0,e.useParams)(),h=g?.jobId||g?.id,[i,j]=(0,c.useState)({client_name:"",client_phone:"",client_email:"",client_address:"",vat_number:"",transport_mode:"SEA",job_date:"",port_loading:"",port_discharge:"",invoice_no:"",supplier_ref:"",truck_details:"",no_of_packages:"0",gross_weight:"0",net_weight:"0",cbm:"0"}),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1);(0,c.useEffect)(()=>{h&&(async()=>{let a=localStorage.getItem("token");if(!a){window.location.href="/login";return}try{let b=(await d.default.get(`${f.API_URL}/api/jobs/${h}/`,{headers:{Authorization:`Token ${a}`}})).data,c=b.shipment_invoice_no||"",e=b.invoice_no||"",g="",i="";if(c.includes("(")){let a=c.split("(");i=a.slice(1).join("(").replace(/\)$/,""),c=a[0].trim()}else c.match(/(\d+x|ft|ton)/i)&&(i=c,c="");if(c.includes("||")){let a=c.split("||");e||(e=a[0].trim()),g=a[1].trim()}else!e&&c&&(g=c);j({client_name:b.client_details?.name||b.client?.name||"",client_phone:b.client_details?.phone||b.client?.phone||"",client_email:b.client_details?.email||b.client?.email||"",client_address:b.client_details?.address||b.client?.address||"",vat_number:b.vat_number||"",transport_mode:b.transport_mode||"SEA",job_date:b.job_date||"",port_loading:b.port_loading||"",port_discharge:b.port_discharge||"",invoice_no:e,supplier_ref:g,truck_details:i,no_of_packages:b.no_of_packages?.toString()||"0",gross_weight:b.gross_weight?.toString()||"0",net_weight:b.net_weight?.toString()||"0",cbm:b.cbm?.toString()||"0"}),l(!1)}catch(a){console.error("Error fetching job:",a),l(!1)}})()},[h]);let o=async b=>{b.preventDefault(),n(!0);let c=localStorage.getItem("token"),e=i.truck_details?` (${i.truck_details})`:"",g=i.invoice_no.trim(),j=i.supplier_ref.trim(),k=`${g} || ${j}${e}`,l={vat_number:i.vat_number,invoice_no:g,client:{name:i.client_name,phone:i.client_phone,email:i.client_email,address:i.client_address,vat_number:i.vat_number},transport_mode:i.transport_mode,job_date:i.job_date,port_loading:i.port_loading,port_discharge:i.port_discharge,shipment_invoice_no:k,no_of_packages:parseFloat(i.no_of_packages)||0,gross_weight:parseFloat(i.gross_weight)||0,net_weight:parseFloat(i.net_weight)||0,cbm:parseFloat(i.cbm)||0};try{await d.default.put(`${f.API_URL}/api/jobs/${h}/`,l,{headers:{Authorization:`Token ${c}`}}),alert("✅ Job Updated Successfully!"),a.push(`/jobs/${h}/view`)}catch(a){if(console.error("Save failed",a),n(!1),a.response&&a.response.data){let b=a.response.data;b.invoice_no?alert(`❌ Error: Invoice Number is too long. Server limit is 100 (or you haven't migrated DB to 1000).`):b.shipment_invoice_no?alert(`❌ Error: Combined text is too long.

PLEASE RUN MIGRATIONS:
1. python manage.py makemigrations
2. python manage.py migrate`):alert(`Server Error:
${JSON.stringify(b,null,2)}`)}else alert("Network Error: Could not reach server.")}};if(k)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center font-bold text-slate-400",children:"LOADING..."});let p="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6",q="block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5",r="w-full p-3 rounded-lg border border-slate-200 font-bold text-slate-900 bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition";return(0,b.jsx)("div",{className:"min-h-screen bg-slate-50 p-6 flex justify-center font-sans",children:(0,b.jsxs)("div",{className:"w-full max-w-4xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Edit Job Details"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 font-medium mt-1",children:"Update customer info or shipment details."})]}),(0,b.jsx)("button",{onClick:()=>a.push("/"),className:"text-slate-500 hover:text-red-600 font-bold text-sm bg-slate-100 hover:bg-red-50 px-4 py-2 rounded-lg transition",children:"Cancel"})]}),(0,b.jsxs)("form",{onSubmit:o,className:"space-y-6",children:[(0,b.jsxs)("div",{className:p,children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-slate-900 border-b pb-4",children:"Customer Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Customer Name"}),(0,b.jsx)("input",{type:"text",value:i.client_name,onChange:a=>j({...i,client_name:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"VAT Number"}),(0,b.jsx)("input",{type:"text",value:i.vat_number,onChange:a=>j({...i,vat_number:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Phone"}),(0,b.jsx)("input",{type:"text",value:i.client_phone,onChange:a=>j({...i,client_phone:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Email"}),(0,b.jsx)("input",{type:"email",value:i.client_email,onChange:a=>j({...i,client_email:a.target.value}),className:r})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:q,children:"Address"}),(0,b.jsx)("textarea",{value:i.client_address,onChange:a=>j({...i,client_address:a.target.value}),className:r,rows:2})]})]})]}),(0,b.jsxs)("div",{className:p,children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-slate-900 border-b pb-4",children:"Shipment Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Transport Mode"}),(0,b.jsxs)("select",{value:i.transport_mode,onChange:a=>j({...i,transport_mode:a.target.value}),className:r,children:[(0,b.jsx)("option",{value:"SEA",children:"Sea Freight"}),(0,b.jsx)("option",{value:"AIR",children:"Air Freight"}),(0,b.jsx)("option",{value:"LAND",children:"Land Freight"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Job Date"}),(0,b.jsx)("input",{type:"date",value:i.job_date,onChange:a=>j({...i,job_date:a.target.value}),className:r})]}),(0,b.jsxs)("div",{className:"md:col-span-2 bg-blue-50 p-5 rounded-xl border border-blue-100",children:[(0,b.jsx)("label",{className:q,children:"Add Container / Vehicle"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:["1x20 ft dry","1x40 ft dry","1x20 ft reefer","1x40 ft reefer","3 ton reefer","3 ton normal","10 ton reefer","10 ton normal"].map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{let b,c;return b=i.truck_details||"",c=a.replace("1x ",""),void(b.includes(c)?b+=`, 1x ${c}`:b=b?`${b}, 1x ${c}`:`1x ${c}`,j({...i,truck_details:b}))},className:"bg-white border border-blue-200 text-blue-800 px-3 py-2 text-[10px] font-bold uppercase rounded-lg hover:bg-blue-600 hover:text-white transition shadow-sm",children:["+ ",a.replace("1x ","")]},a))}),(0,b.jsx)("label",{className:q,children:"Selected List (Editable)"}),(0,b.jsx)("input",{type:"text",value:i.truck_details,onChange:a=>j({...i,truck_details:a.target.value}),className:"w-full p-3 rounded-lg border border-blue-200 font-bold text-blue-900 bg-white focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Origin"}),(0,b.jsx)("input",{type:"text",value:i.port_loading,onChange:a=>j({...i,port_loading:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Destination"}),(0,b.jsx)("input",{type:"text",value:i.port_discharge,onChange:a=>j({...i,port_discharge:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Invoice Number"}),(0,b.jsx)("input",{type:"text",value:i.invoice_no,onChange:a=>j({...i,invoice_no:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Supplier Reference"}),(0,b.jsx)("input",{type:"text",value:i.supplier_ref,onChange:a=>j({...i,supplier_ref:a.target.value}),className:r})]})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-slate-100 grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Packages"}),(0,b.jsx)("input",{type:"number",value:i.no_of_packages,onChange:a=>j({...i,no_of_packages:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Gross Wt"}),(0,b.jsx)("input",{type:"number",value:i.gross_weight,onChange:a=>j({...i,gross_weight:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Net Wt"}),(0,b.jsx)("input",{type:"number",value:i.net_weight,onChange:a=>j({...i,net_weight:a.target.value}),className:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:q,children:"Volume"}),(0,b.jsx)("input",{type:"number",value:i.cbm,onChange:a=>j({...i,cbm:a.target.value}),className:r})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-2",children:(0,b.jsx)("button",{type:"submit",disabled:m,className:"bg-slate-900 text-white font-bold py-4 px-12 rounded-xl shadow-lg hover:bg-black transition w-full md:w-auto",children:m?"Saving...":"Save Changes"})})]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f8296276._.js.map