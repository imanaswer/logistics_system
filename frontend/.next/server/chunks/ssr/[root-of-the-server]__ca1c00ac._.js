module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},45056,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].React},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},31699,(a,b,c)=>{"use strict";b.exports=a.r(18622)},57850,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactJsxRuntime},14102,a=>{"use strict";a.s(["API_URL",0,"https://trans-tracker-4.preview.emergentagent.com"])},15003,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(73951),e=a.i(93609),f=a.i(14102);function g(){let a=(0,e.useRouter)(),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)({}),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)("ALL"),[o,p]=(0,c.useState)(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),[q,r]=(0,c.useState)(new Date().toISOString().split("T")[0]),[s,t]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{let a=localStorage.getItem("token");if(!a){window.location.href="/login";return}try{let[b,c]=await Promise.all([d.default.get(`${f.API_URL}/api/jobs/`,{headers:{Authorization:`Token ${a}`}}),d.default.get(`${f.API_URL}/api/transactions/`,{headers:{Authorization:`Token ${a}`}})]),e={};b.data.forEach(a=>{e[a.id]=a.client_details?.name||a.client?.name||"Unknown"}),j(e);let g=c.data.sort((a,b)=>new Date(a.date).getTime()-new Date(b.date).getTime());h(g);let i=[...g.map(a=>a.party_name),...Object.values(e)],k=Array.from(new Set(i.map(a=>a?.toUpperCase().trim()))).sort();l(k)}catch(a){console.error(a)}finally{t(!1)}})()},[]);let u=(0,c.useMemo)(()=>{let a=0,b=g;if("ALL"!==m){let a=m.toLowerCase();b=b.filter(b=>(b.party_name||"").toLowerCase().includes(a)||(i[b.job]||"").toLowerCase().includes(a))}return o&&(b=b.filter(a=>a.date>=o)),q&&(b=b.filter(a=>a.date<=q)),b.map(b=>{let c=["CR","BR"].includes(b.trans_type),d=Number(b.amount);return c?a+=d:a-=d,{...b,received:c?d:0,paid:c?0:d,currentBalance:a}})},[m,o,q,g,i]),v=u.reduce((a,b)=>a+b.received,0),w=u.reduce((a,b)=>a+b.paid,0),x=v-w;return s?(0,b.jsx)("div",{className:"p-10 font-black text-center text-slate-400",children:"LOADING REPORTS..."}):(0,b.jsxs)("div",{className:"min-h-screen p-8 bg-slate-50 font-sans text-slate-900",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between max-w-6xl mx-auto mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-black tracking-tight text-slate-900",children:"Ledger Statement"}),(0,b.jsx)("p",{className:"font-medium text-slate-500",children:"Real-time running balance and cash flow."})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>a.push("/reports/ledger"),className:"px-4 py-2 text-xs font-bold transition bg-blue-600 text-white border rounded-lg shadow-sm hover:bg-blue-700","data-testid":"professional-ledger-button",children:"ðŸ“Š Professional Ledger"}),(0,b.jsx)("button",{onClick:()=>a.push("/"),className:"px-4 py-2 text-xs font-bold transition bg-white border rounded-lg shadow-sm border-slate-300 text-slate-700 hover:bg-slate-50",children:"â† Dashboard"})]})]}),(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-end gap-4 p-5 border bg-white rounded-2xl shadow-sm border-slate-200 md:flex-row",children:[(0,b.jsxs)("div",{className:"flex-1 w-full",children:[(0,b.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Party Name"}),(0,b.jsxs)("select",{value:m,onChange:a=>n(a.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 font-bold text-slate-800 bg-slate-50 outline-none transition focus:bg-white focus:ring-2 focus:ring-blue-500 appearance-none",children:[(0,b.jsx)("option",{value:"ALL",children:"All Clients / Parties"}),k.map((a,c)=>(0,b.jsx)("option",{value:a,children:a},c))]})]}),(0,b.jsxs)("div",{className:"w-full md:w-40",children:[(0,b.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"From"}),(0,b.jsx)("input",{type:"date",value:o,onChange:a=>p(a.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 font-bold text-slate-800 bg-slate-50 outline-none"})]}),(0,b.jsxs)("div",{className:"w-full md:w-40",children:[(0,b.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"To"}),(0,b.jsx)("input",{type:"date",value:q,onChange:a=>r(a.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 font-bold text-slate-800 bg-slate-50 outline-none"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"relative flex items-center justify-between p-6 overflow-hidden bg-white border shadow-sm rounded-2xl border-slate-200",children:[(0,b.jsx)("div",{className:"absolute top-0 bottom-0 left-0 w-1 bg-emerald-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Total Received"}),(0,b.jsx)("p",{className:"text-3xl font-black text-slate-900",children:v.toFixed(3)})]})]}),(0,b.jsxs)("div",{className:"relative flex items-center justify-between p-6 overflow-hidden bg-white border shadow-sm rounded-2xl border-slate-200",children:[(0,b.jsx)("div",{className:"absolute top-0 bottom-0 left-0 w-1 bg-red-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Total Paid"}),(0,b.jsx)("p",{className:"text-3xl font-black text-slate-900",children:w.toFixed(3)})]})]}),(0,b.jsx)("div",{className:"relative flex items-center justify-between p-6 overflow-hidden text-white shadow-lg bg-slate-900 rounded-2xl",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Net Cash Position"}),(0,b.jsx)("p",{className:"text-3xl font-black",children:x.toFixed(3)})]})})]}),(0,b.jsx)("div",{className:"overflow-hidden border bg-white rounded-2xl shadow-sm border-slate-200",children:(0,b.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,b.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200 text-[10px] font-black text-slate-500 uppercase",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-4",children:"Date"}),(0,b.jsx)("th",{className:"p-4",children:"Party & Job Info"}),(0,b.jsx)("th",{className:"p-4",children:"Client Name"}),(0,b.jsx)("th",{className:"p-4",children:"Description"}),(0,b.jsx)("th",{className:"p-4 text-right",children:"Received (+)"}),(0,b.jsx)("th",{className:"p-4 text-right text-red-500",children:"Paid (-)"}),(0,b.jsx)("th",{className:"p-4 text-right bg-slate-100 text-slate-900",children:"Running Balance"})]})}),(0,b.jsx)("tbody",{className:"text-sm font-medium divide-y divide-slate-100 text-slate-700",children:0===u.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"p-10 text-center text-slate-400",children:"No transactions match your filters."})}):u.map(a=>(0,b.jsxs)("tr",{className:"transition hover:bg-slate-50/80",children:[(0,b.jsx)("td",{className:"p-4 font-bold whitespace-nowrap",children:a.date}),(0,b.jsxs)("td",{className:"p-4",children:[(0,b.jsx)("div",{className:"font-bold text-slate-900",children:a.party_name}),a.job&&(0,b.jsxs)("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded border border-blue-100 font-bold",children:["JOB #",a.job]})]}),(0,b.jsx)("td",{className:"p-4 font-bold text-slate-900",children:a.client_name||"-"}),(0,b.jsx)("td",{className:"p-4 text-xs text-slate-500 max-w-xs",children:a.description||"-"}),(0,b.jsx)("td",{className:"p-4 font-bold text-right text-green-600",children:a.received>0?a.received.toFixed(3):"-"}),(0,b.jsx)("td",{className:"p-4 font-bold text-right text-red-600",children:a.paid>0?a.paid.toFixed(3):"-"}),(0,b.jsx)("td",{className:`p-4 text-right font-black bg-slate-50/50 ${a.currentBalance>=0?"text-slate-900":"text-red-700"}`,children:a.currentBalance.toFixed(3)})]},a.id))})]})})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ca1c00ac._.js.map