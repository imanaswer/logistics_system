{"version":3,"sources":["../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../frontend/app/tools/ai-scanner/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","\"use client\";\nimport { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/navigation';\n\nexport default function AIScanner() {\n  const router = useRouter();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState<any>(null);\n  const [preview, setPreview] = useState<string | null>(null);\n\n  // 1. Handle File Selection\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setPreview(URL.createObjectURL(file)); // Show a preview of the receipt\n      setResult(null); // Clear previous results\n    }\n  };\n\n  // 2. Perform the Actual Scan\n  const handleScan = async () => {\n    if (!fileInputRef.current?.files?.[0]) {\n      return alert(\"Please select an image first!\");\n    }\n\n    const formData = new FormData();\n    formData.append('image', fileInputRef.current.files[0]);\n\n    setLoading(true);\n    const token = localStorage.getItem('token');\n\n    try {\n        // IMPORTANT: Change this URL to your actual backend endpoint\n        const res = await axios.post('http://127.0.0.1:8000/api/ai/scan/', formData, {\n            headers: { \n                'Content-Type': 'multipart/form-data',\n                'Authorization': `Token ${token}` \n            }\n        });\n        \n        setResult(res.data);\n    } catch (e: any) {\n        console.error(e);\n        // Fallback for demo purposes if backend isn't ready\n        alert(\"Scan Failed. Ensure your Django view handles POST /api/ai/scan/ with an image.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const saveExpense = async () => {\n    if (!result) return;\n    try {\n        const token = localStorage.getItem('token');\n        await axios.post('http://127.0.0.1:8000/api/transactions/', {\n            trans_type: 'CP', // Cash Payment\n            amount: result.amount,\n            party_name: result.merchant,\n            description: `AI Scanned Receipt - ${result.merchant}`,\n            date: result.date || new Date().toISOString().split('T')[0]\n        }, {\n            headers: { 'Authorization': `Token ${token}` }\n        });\n        alert(\"Expense Saved Successfully!\");\n        router.push('/reports');\n    } catch (error) {\n        alert(\"Failed to save transaction. Check if all required fields are present.\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-950 text-white p-4 md:p-8 flex flex-col items-center justify-center font-sans antialiased\">\n      <div className=\"max-w-md w-full bg-slate-900 p-8 rounded-[2.5rem] border border-slate-800 shadow-2xl relative overflow-hidden\">\n        \n        {/* Neon Header Glow */}\n        <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-600 via-indigo-500 to-cyan-400\"></div>\n\n        <div className=\"text-center mb-8\">\n            <div className=\"w-16 h-16 bg-blue-600/20 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-blue-500/30\">\n                <span className=\"text-3xl\">üëÅÔ∏è‚Äçüó®Ô∏è</span>\n            </div>\n            <h1 className=\"text-2xl font-black tracking-tight italic\">OCR SCANNER</h1>\n            <p className=\"text-slate-500 text-xs font-bold uppercase tracking-widest mt-1\">Automatic Expense Entry</p>\n        </div>\n\n        {/* Real File Input (Hidden) */}\n        <input \n          type=\"file\" \n          ref={fileInputRef} \n          onChange={handleFileChange} \n          className=\"hidden\" \n          accept=\"image/*\"\n        />\n\n        {/* Upload Box */}\n        <div \n            onClick={() => fileInputRef.current?.click()}\n            className={`border-2 border-dashed rounded-3xl p-6 text-center transition-all cursor-pointer mb-6 overflow-hidden ${\n                preview ? 'border-blue-500 bg-blue-500/5' : 'border-slate-700 bg-slate-800/50 hover:bg-slate-800'\n            }`}\n        >\n            {preview ? (\n                <img src={preview} alt=\"Receipt Preview\" className=\"max-h-48 mx-auto rounded-lg shadow-lg\" />\n            ) : (\n                <div className=\"py-4\">\n                    <div className=\"w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-3\">\n                        <svg className=\"w-6 h-6 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\"></path></svg>\n                    </div>\n                    <p className=\"text-slate-400 text-xs font-black uppercase tracking-tighter\">Choose Receipt Image</p>\n                </div>\n            )}\n        </div>\n\n        {/* Action Button */}\n        <button \n            onClick={handleScan}\n            disabled={loading || !preview || !!result}\n            className=\"w-full py-4 bg-white text-black font-black rounded-2xl shadow-xl transition active:scale-95 disabled:opacity-20 flex justify-center items-center gap-2 uppercase text-xs tracking-widest\"\n        >\n            {loading ? 'Analyzing Pixels...' : result ? 'Scan Finished' : 'Begin AI Scan'}\n        </button>\n\n        {/* Results Area */}\n        {result && (\n            <div className=\"mt-8 space-y-4 animate-in fade-in zoom-in duration-300\">\n                <div className=\"flex items-center gap-2 text-blue-400\">\n                    <div className=\"w-1.5 h-1.5 bg-blue-400 rounded-full\"></div>\n                    <p className=\"text-[10px] font-black uppercase tracking-[0.2em]\">Extraction Results</p>\n                </div>\n                \n                <div className=\"grid gap-3 bg-black/40 p-5 rounded-3xl border border-slate-800\">\n                    <div className=\"flex justify-between items-center\">\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase\">Merchant</span>\n                        <span className=\"font-black text-sm\">{result.merchant}</span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase\">Date</span>\n                        <span className=\"font-bold text-sm\">{result.date}</span>\n                    </div>\n                    <div className=\"h-[1px] bg-slate-800 my-1\"></div>\n                    <div className=\"flex justify-between items-center\">\n                        <span className=\"text-[10px] font-bold text-blue-500 uppercase\">Total Amount</span>\n                        <span className=\"font-black text-xl text-blue-400\">{Number(result.amount).toFixed(3)} OMR</span>\n                    </div>\n                </div>\n\n                <div className=\"flex gap-3\">\n                    <button onClick={() => {setResult(null); setPreview(null);}} className=\"flex-1 py-4 border border-slate-800 rounded-2xl text-[10px] font-black uppercase hover:bg-slate-800 transition\">Discard</button>\n                    <button onClick={saveExpense} className=\"flex-[2] py-4 bg-blue-600 rounded-2xl text-[10px] font-black uppercase hover:bg-blue-500 transition shadow-lg shadow-blue-600/20\">Record Expense</button>\n                </div>\n            </div>\n        )}\n      </div>\n      \n      <button onClick={() => router.push(\"/\")} className=\"mt-8 text-slate-600 hover:text-white transition text-[10px] font-bold uppercase tracking-widest\">\n        Exit Scanner\n      </button>\n    </div>\n  );\n}"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}