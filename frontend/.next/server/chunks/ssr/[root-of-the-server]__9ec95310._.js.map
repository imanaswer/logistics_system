{"version":3,"sources":["../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../frontend/app/config.ts","../../../../../frontend/app/invoices/%5BjobId%5D/edit/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","// Frontend API Configuration\n// This file manages the backend URL for all API calls\n\n// IMPORTANT: Use environment variable for production deployments\n// Set NEXT_PUBLIC_API_URL in environment variables\n\nexport const API_URL = process.env.NEXT_PUBLIC_API_URL || '';\n\n// Validate URL format\nif (typeof window !== 'undefined') {\n  console.log('ðŸ”— Backend API URL:', API_URL);\n}\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport { useParams, useRouter } from \"next/navigation\";\n// Make sure this path matches your project structure\nimport { API_URL } from \"../../../config\";\n\n/* ================= TYPES & CONSTANTS ================= */\n\ninterface ChargeType {\n  id: number;\n  name: string;\n}\ninterface InvoiceRow {\n  charge_type: string;\n  description: string;\n  amount: number | \"\";\n  vat: number;\n  total: number;\n}\ninterface Job {\n  transport_document_no?: string;\n  invoice_no?: string;\n  vat_number?: string;\n  client?: { name: string; vat_number?: string };\n  client_details?: { name: string; vat_number?: string };\n}\n\nconst API_BASE = `${API_URL}/api`;\nconst EMPTY_ROW: InvoiceRow = { charge_type: \"\", description: \"\", amount: \"\", vat: 0, total: 0 };\n\n/* ================= ICONS ================= */\n\nconst IconPlus = () => <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2.5\" d=\"M12 4v16m8-8H4\"/></svg>;\nconst IconTrash = () => <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/></svg>;\nconst IconBack = () => <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2.5\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"/></svg>;\nconst IconCheck = () => <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\"/></svg>;\n\n/* ================= MAIN COMPONENT ================= */\n\nexport default function EditInvoicePage() {\n  const router = useRouter();\n  const params = useParams();\n  const jobId = params?.jobId;\n\n  // --- EXISTING STATE ---\n  const [job, setJob] = useState<Job | null>(null);\n  const [chargeTypes, setChargeTypes] = useState<ChargeType[]>([]);\n  const [rows, setRows] = useState<InvoiceRow[]>([EMPTY_ROW]);\n  const [billNo, setBillNo] = useState(\"\");\n  const [vatNo, setVatNo] = useState(\"\");\n  const [originalItemIds, setOriginalItemIds] = useState<number[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n\n  // --- NEW STATE: CUSTOM HEADER POPUP ---\n  const [isAddingType, setIsAddingType] = useState(false);\n  const [newTypeName, setNewTypeName] = useState(\"\");\n  const [targetRowIndex, setTargetRowIndex] = useState<number | null>(null);\n\n  const authConfig = useMemo(() => {\n    const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\n    return token ? { headers: { Authorization: `Token ${token}` } } : null;\n  }, []);\n\n  // --- EXISTING LOAD LOGIC ---\n  useEffect(() => {\n    if (!authConfig) { router.push(\"/login\"); return; }\n    if (!jobId) return;\n\n    const load = async () => {\n      try {\n        const [jobRes, chargeRes, itemRes] = await Promise.all([\n          axios.get(`${API_BASE}/jobs/${jobId}/`, authConfig),\n          axios.get(`${API_BASE}/chargetypes/`, authConfig),\n          axios.get(`${API_BASE}/invoice-items/?job=${jobId}`, authConfig),\n        ]);\n\n        setJob(jobRes.data);\n        setBillNo(jobRes.data.transport_document_no ?? \"\");\n        setVatNo(jobRes.data.vat_number ?? \"\");\n        setChargeTypes(chargeRes.data);\n\n        const jobItems = itemRes.data;\n        if (jobItems && jobItems.length > 0) {\n          setRows(jobItems.map((i: any) => ({\n            charge_type: String(i.charge_type),\n            description: i.description || \"\",\n            amount: Number(i.amount),\n            vat: Number(i.vat),\n            total: Number(i.total),\n          })));\n          setOriginalItemIds(jobItems.map((i: any) => i.id));\n        } else {\n          setRows([EMPTY_ROW]);\n          setOriginalItemIds([]);\n        }\n      } catch (err) {\n        console.error(\"Load error:\", err);\n        router.push(\"/\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [authConfig, jobId, router]);\n\n  // --- NEW FUNCTION: SAVE NEW HEADER ---\n  const handleCreateChargeType = async () => {\n    if (!newTypeName.trim() || !authConfig) return;\n    try {\n      // 1. Save to backend\n      const res = await axios.post(`${API_BASE}/chargetypes/`, { name: newTypeName }, authConfig);\n      const newType = res.data;\n      \n      // 2. Add to dropdown list immediately\n      setChargeTypes((prev) => [...prev, newType]);\n\n      // 3. Auto-select it for the row that requested it\n      if (targetRowIndex !== null) {\n        updateRow(targetRowIndex, \"charge_type\", String(newType.id));\n      }\n      \n      // 4. Close popup\n      setIsAddingType(false);\n      setNewTypeName(\"\");\n      setTargetRowIndex(null);\n    } catch (err) {\n      alert(\"Failed to add header. It might already exist.\");\n    }\n  };\n\n  // --- EXISTING UPDATE ROW LOGIC (VAT Calc Preserved) ---\n  const updateRow = (index: number, field: keyof InvoiceRow, value: any) => {\n    setRows((prev) => {\n      const next = [...prev];\n      const row = { ...next[index], [field]: value };\n      const numAmount = row.amount === \"\" ? 0 : Number(row.amount);\n\n      // Auto-Calculate VAT if Charge Type or Amount changes\n      if (field === \"amount\" || field === \"charge_type\") {\n        // Use current state OR newly added type if available\n        const charge = chargeTypes.find((c) => String(c.id) === row.charge_type);\n        \n        // Regex to check for taxable keywords\n        const isTaxable = charge?.name?.toLowerCase().match(/custom|transport|handling|agency|fee|clearance/);\n        row.vat = isTaxable ? numAmount * 0.05 : 0;\n      }\n\n      row.total = numAmount + row.vat;\n      next[index] = row;\n      return next;\n    });\n  };\n\n  // --- EXISTING SAVE LOGIC (Safe Delete Preserved) ---\n  const saveInvoice = async () => {\n    if (!authConfig || !jobId) return;\n    setIsSaving(true);\n    try {\n      // 1. Update Job Details\n      await axios.patch(`${API_BASE}/jobs/${jobId}/`, { transport_document_no: billNo, vat_number: vatNo }, authConfig);\n      \n      // 2. Safe Delete (Only items belonging to THIS job)\n      const currentItemsRes = await axios.get(`${API_BASE}/invoice-items/?job=${jobId}`, authConfig);\n      const currentIds = currentItemsRes.data.map((x: any) => x.id);\n      if (currentIds.length > 0) {\n        await Promise.all(currentIds.map((id: number) => axios.delete(`${API_BASE}/invoice-items/${id}/`, authConfig)));\n      }\n\n      // 3. Create New Items\n      const validRows = rows.filter((r) => r.charge_type && Number(r.amount) > 0);\n      await Promise.all(validRows.map((r) =>\n          axios.post(`${API_BASE}/invoice-items/`, {\n            job: Number(jobId),\n            charge_type: Number(r.charge_type),\n            description: r.description || \"Charge\",\n            amount: r.amount,\n            vat: r.vat,\n            total: r.total,\n          }, authConfig)\n        )\n      );\n      router.push(`/invoices/${jobId}/view`);\n    } catch (err) {\n      console.error(\"Save error:\", err);\n      alert(\"Save failed. Please check your data.\");\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const totals = useMemo(() => {\n    return rows.reduce((acc, r) => ({\n        subtotal: acc.subtotal + (Number(r.amount) || 0),\n        vat: acc.vat + (Number(r.vat) || 0),\n        grand: acc.grand + (Number(r.total) || 0),\n      }), { subtotal: 0, vat: 0, grand: 0 }\n    );\n  }, [rows]);\n\n  if (loading) return <div className=\"min-h-screen flex items-center justify-center bg-slate-50 font-black text-slate-400\">LOADING...</div>;\n\n  return (\n    <div className=\"min-h-screen bg-[#F8FAFC] text-slate-900 antialiased pb-20\">\n      <header className=\"bg-white border-b border-slate-200 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-6 h-20 flex justify-between items-center\">\n          <div className=\"flex items-center gap-4\">\n            <button onClick={() => router.push(\"/\")} className=\"p-2.5 hover:bg-slate-100 rounded-xl transition-all text-slate-400 hover:text-slate-900\"><IconBack /></button>\n            <div className=\"h-8 w-[1px] bg-slate-200 mx-2 hidden md:block\"></div>\n            <div>\n              <h1 className=\"text-lg font-black tracking-tight uppercase\">Billing Editor</h1>\n              <p className=\"text-[10px] font-bold text-blue-600 uppercase tracking-widest\">Job ID: #{jobId} | Ref: {job?.invoice_no || \"Draft\"}</p>\n            </div>\n          </div>\n          <button onClick={saveInvoice} disabled={isSaving} className=\"bg-black hover:bg-blue-700 disabled:bg-slate-300 text-white px-8 py-3 rounded-2xl font-black text-xs uppercase tracking-[0.15em] transition-all shadow-xl flex items-center gap-3\">\n            {isSaving ? \"Syncing...\" : <><IconCheck /> Finalize & Save</>}\n          </button>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto p-6 md:p-10 grid grid-cols-12 gap-8\">\n        <div className=\"col-span-12 lg:col-span-8 space-y-6\">\n          <div className=\"bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden\">\n            <div className=\"px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/30\">\n              <h2 className=\"text-xs font-black text-slate-400 uppercase tracking-[0.2em]\">Service Statement</h2>\n              <button onClick={() => setRows([...rows, { ...EMPTY_ROW }])} className=\"text-blue-600 hover:text-black transition flex items-center gap-1 text-xs font-black uppercase\"><IconPlus /> Add Row</button>\n            </div>\n\n            <div className=\"p-6 md:p-8 space-y-4\">\n              {rows.map((row, i) => (\n                <div key={i} className=\"group grid grid-cols-12 gap-4 items-end p-5 rounded-2xl bg-slate-50/50 border-2 border-transparent hover:border-blue-100 hover:bg-white transition-all\">\n                  <div className=\"col-span-12 md:col-span-4 relative\">\n                    <label className=\"text-[10px] font-black text-slate-400 uppercase mb-2 block\">Category</label>\n                    {/* UPDATED SELECT DROPDOWN */}\n                    <select\n                      className=\"w-full bg-white border border-slate-200 rounded-xl text-sm font-bold h-12 px-4 focus:ring-2 focus:ring-blue-500 outline-none transition-all appearance-none\"\n                      value={row.charge_type}\n                      onChange={(e) => {\n                        // DETECT \"ADD_NEW\" SELECTION\n                        if (e.target.value === \"ADD_NEW\") {\n                          setTargetRowIndex(i);\n                          setIsAddingType(true);\n                        } else {\n                          updateRow(i, \"charge_type\", e.target.value);\n                        }\n                      }}\n                    >\n                      <option value=\"\">Select Type</option>\n                      {chargeTypes.map((c) => <option key={c.id} value={c.id}>{c.name}</option>)}\n                      {/* NEW OPTION AT THE BOTTOM */}\n                      <option value=\"ADD_NEW\" className=\"font-black text-blue-600 bg-blue-50\">+ Add Custom Header...</option>\n                    </select>\n                    {/* DROPDOWN ARROW FIX */}\n                    <div className=\"absolute right-4 top-[2.4rem] pointer-events-none text-slate-400\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\" /></svg>\n                    </div>\n                  </div>\n\n                  <div className=\"col-span-12 md:col-span-5\">\n                    <label className=\"text-[10px] font-black text-slate-400 uppercase mb-2 block\">Description</label>\n                    <input className=\"w-full bg-white border border-slate-200 rounded-xl text-sm font-bold h-12 px-4 focus:ring-2 focus:ring-blue-500 outline-none transition-all\" value={row.description} onChange={(e) => updateRow(i, \"description\", e.target.value)} placeholder=\"Details...\" />\n                  </div>\n\n                  <div className=\"col-span-10 md:col-span-2\">\n                    <label className=\"text-[10px] font-black text-slate-400 uppercase mb-2 block text-right\">Amount (OMR)</label>\n                    <input type=\"number\" step=\"0.001\" className=\"w-full bg-white border border-slate-200 rounded-xl text-sm font-black h-12 px-4 text-right focus:ring-2 focus:ring-blue-500 outline-none transition-all\" value={row.amount} onChange={(e) => updateRow(i, \"amount\", e.target.value)} />\n                  </div>\n\n                  <div className=\"col-span-2 md:col-span-1 flex justify-center pb-2\">\n                    <button onClick={() => rows.length > 1 && setRows(rows.filter((_, idx) => idx !== i))} className=\"text-slate-300 hover:text-red-500 transition-all p-2\"><IconTrash /></button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n          <div className=\"bg-blue-600 rounded-[2rem] p-8 text-white shadow-2xl shadow-blue-200 relative overflow-hidden\">\n            <div className=\"relative z-10\">\n              <h3 className=\"text-xs font-black text-blue-200 uppercase tracking-[0.2em] mb-4\">Customer Details</h3>\n              <p className=\"text-xl font-black leading-tight mb-6\">{job?.client_details?.name || job?.client?.name || \"Loading...\"}</p>\n              <div className=\"grid grid-cols-1 gap-4 pt-4 border-t border-blue-500\">\n                <div>\n                    <label className=\"text-[10px] font-black text-blue-200 uppercase\">VAT / TRN</label>\n                    <input value={vatNo} onChange={(e) => setVatNo(e.target.value)} className=\"w-full bg-blue-700/50 border-none rounded-xl px-4 py-3 text-sm font-black placeholder:text-blue-400 focus:ring-2 focus:ring-white outline-none mt-1\" />\n                </div>\n                <div>\n                    <label className=\"text-[10px] font-black text-blue-200 uppercase\">Transport Ref (AWB/BL)</label>\n                    <input value={billNo} onChange={(e) => setBillNo(e.target.value)} className=\"w-full bg-blue-700/50 border-none rounded-xl px-4 py-3 text-sm font-black placeholder:text-blue-400 focus:ring-2 focus:ring-white outline-none mt-1\" />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-[2rem] border border-slate-200 p-8 shadow-sm\">\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center text-xs font-bold uppercase tracking-widest text-slate-400\"><span>Subtotal</span><span className=\"text-slate-900\">{totals.subtotal.toFixed(3)}</span></div>\n              <div className=\"flex justify-between items-center text-xs font-bold uppercase tracking-widest text-slate-400\"><span>VAT (5%)</span><span className=\"text-blue-600\">+{totals.vat.toFixed(3)}</span></div>\n              <div className=\"pt-6 mt-2 border-t border-slate-100 flex justify-between items-end\"><span className=\"text-xs font-black uppercase text-slate-900\">Grand Total</span><span className=\"text-4xl font-black tracking-tighter text-slate-900 tabular-nums\">{totals.grand.toFixed(3)}</span></div>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/* --- NEW MODAL FOR ADDING CUSTOM HEADER --- */}\n      {isAddingType && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6 space-y-4 scale-100\">\n            <div className=\"text-center\">\n              <h3 className=\"text-lg font-black text-slate-900\">New Custom Header</h3>\n              <p className=\"text-xs text-slate-400\">Enter the name for this new charge category.</p>\n            </div>\n            \n            <input \n              autoFocus\n              value={newTypeName}\n              onChange={(e) => setNewTypeName(e.target.value)}\n              placeholder=\"e.g. Special Handling Fee\"\n              className=\"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold focus:ring-2 focus:ring-blue-500 outline-none\"\n              onKeyDown={(e) => e.key === 'Enter' && handleCreateChargeType()}\n            />\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button \n                onClick={() => setIsAddingType(false)} \n                className=\"py-3 rounded-xl text-xs font-bold uppercase tracking-wider text-slate-500 hover:bg-slate-100 transition\"\n              >\n                Cancel\n              </button>\n              <button \n                onClick={handleCreateChargeType} \n                disabled={!newTypeName.trim()} \n                className=\"py-3 rounded-xl text-xs font-bold uppercase tracking-wider bg-black text-white hover:bg-blue-600 shadow-lg shadow-blue-500/20 transition disabled:opacity-50\"\n              >\n                Save & Add\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}