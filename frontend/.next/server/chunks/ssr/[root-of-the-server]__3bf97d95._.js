module.exports=[45056,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].React},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},31699,(a,b,c)=>{"use strict";b.exports=a.r(18622)},57850,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactJsxRuntime},1395,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactServerDOMTurbopackClient},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},14102,a=>{"use strict";a.s(["API_URL",0,"https://trans-tracker-4.preview.emergentagent.com"])},97805,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(73951),e=a.i(93609),f=a.i(59843),g=a.i(14102);function h(){let a=(0,e.useRouter)(),h=(0,e.useParams)(),i=h.jobId||h.id,[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{let a=async()=>{let a=localStorage.getItem("token");if(!a){window.location.href="/login";return}let b={headers:{Authorization:`Token ${a}`}};try{let a=await d.default.get(`${g.API_URL}/api/jobs/${i}/?t=${Date.now()}`,b);k(a.data),(await d.default.get(`${g.API_URL}/api/invoice-items/?job=${i}&t=${Date.now()}`,b)).data.length>0&&o(!0),m(!1)}catch(a){a.response&&401===a.response.status&&(window.location.href="/login"),m(!1)}};i&&a()},[i]),l)return(0,b.jsx)("div",{className:"p-10 text-center font-bold text-slate-400 tracking-widest uppercase",children:"Loading Job..."});if(!j)return(0,b.jsx)("div",{className:"p-10 text-center text-red-600 font-bold uppercase",children:"Job not found"});let p=j.client_details?.name||j.client?.name||"Unknown Client",q=j.client_details?.phone||j.client?.phone||"-",r=j.client_details?.email||j.client?.email||"-",s=j.client_details?.address||j.client?.address||"",t=j.vat_number||"Not Provided",u=j.shipment_invoice_no||"",v="N/A",w=null;if(u.includes("(")&&u.includes(")")){let a=u.split("(");v=a[0].trim(),w=a[1].replace(")","").trim()}else u.toLowerCase().includes("ft")||u.toLowerCase().includes("ton")||u.toLowerCase().includes("x")?(w=u,v="-"):v=u||"N/A";let x=async()=>{if(confirm("Are you sure you want to DELETE this Job?"))try{let b=localStorage.getItem("token");await d.default.delete(`${g.API_URL}/api/jobs/${i}/`,{headers:{Authorization:`Token ${b}`}}),a.push("/")}catch(a){alert("Failed to delete.")}},y="text-xs font-black text-slate-400 uppercase tracking-widest mb-4",z="text-[10px] text-slate-500 uppercase font-bold mb-0.5 tracking-wide";return(0,b.jsx)("div",{className:"min-h-screen bg-slate-100 p-4 md:p-8 flex justify-center font-sans",children:(0,b.jsxs)("div",{className:"w-full max-w-6xl bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200",children:[(0,b.jsxs)("div",{className:"bg-slate-900 p-8 text-white flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center font-black text-xl",children:"AIR"===j.transport_mode?"âœˆ":"SEA"===j.transport_mode?"âš“":"ðŸš›"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-black tracking-tight text-white uppercase italic",children:["JOB #",j.id]}),(0,b.jsxs)("p",{className:"text-slate-400 text-xs font-bold mt-1",children:["Created: ",j.job_date]})]})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 items-center justify-center",children:[(0,b.jsx)("button",{onClick:()=>{let a=q.replace(/[^0-9]/g,""),b=`Hello ${p},

Update regarding Job #${j.id}.
Ref: ${v}
Status: ${j.is_finished?"Completed":"In Progress"}`;window.open(`https://api.whatsapp.com/send?phone=${a}&text=${encodeURIComponent(b)}`,"_blank")},className:"bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg font-bold text-xs transition shadow-lg flex items-center gap-2",children:"WhatsApp"}),(0,b.jsx)("button",{onClick:()=>{let a=`Update: Job #${j.id}`;window.open(`mailto:${r}?subject=${encodeURIComponent(a)}`)},className:"bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold text-xs transition shadow-lg",children:"Email"}),(0,b.jsx)("div",{className:"w-px h-8 bg-slate-700 mx-2"}),n?(0,b.jsx)(f.default,{href:`/invoices/${j.id}/view`,children:(0,b.jsx)("button",{className:"bg-teal-500 hover:bg-teal-600 text-white px-5 py-2 rounded-lg text-xs font-bold transition shadow-lg",children:"View Invoice"})}):(0,b.jsx)(f.default,{href:`/invoices/${j.id}`,children:(0,b.jsx)("button",{className:"bg-purple-500 hover:bg-purple-600 text-white px-5 py-2 rounded-lg text-xs font-bold transition shadow-lg",children:"Generate Invoice"})}),(0,b.jsx)(f.default,{href:`/jobs/${j.id}/edit`,children:(0,b.jsx)("button",{className:"bg-slate-700 hover:bg-slate-600 text-white px-5 py-2 rounded-lg text-xs font-bold transition border border-slate-600",children:"Edit Job"})}),(0,b.jsx)("button",{onClick:()=>a.push("/"),className:"bg-white text-slate-900 px-5 py-2 rounded-lg text-xs font-bold hover:bg-slate-200 transition",children:"Close"})]})]}),(0,b.jsxs)("div",{className:"p-8 grid grid-cols-1 md:grid-cols-2 gap-12",children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:y,children:"Customer Information"}),(0,b.jsxs)("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-blue-100 p-3 rounded-full text-blue-600",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,b.jsxs)("div",{className:"flex-grow",children:[(0,b.jsx)("p",{className:z,children:"Client Name"}),(0,b.jsx)("p",{className:"text-xl font-black text-slate-900 mb-4",children:p}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:z,children:"Phone"}),(0,b.jsx)("p",{className:"text-slate-900 font-bold text-sm",children:q})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:z,children:"VAT Number"}),(0,b.jsx)("p",{className:"text-amber-600 font-black text-sm uppercase",children:t})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("p",{className:z,children:"Address"}),(0,b.jsx)("p",{className:"text-slate-700 text-sm font-medium whitespace-pre-line",children:s})]})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:y,children:"Cargo Summary"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-emerald-50 border border-emerald-100 p-4 rounded-xl text-center",children:[(0,b.jsx)("p",{className:"text-[10px] text-emerald-600 font-bold uppercase",children:"Packages"}),(0,b.jsx)("p",{className:"text-2xl font-black text-emerald-900",children:j.no_of_packages})]}),(0,b.jsxs)("div",{className:"bg-emerald-50 border border-emerald-100 p-4 rounded-xl text-center",children:[(0,b.jsx)("p",{className:"text-[10px] text-emerald-600 font-bold uppercase",children:"Gross Wt"}),(0,b.jsxs)("p",{className:"text-xl font-black text-emerald-900",children:[j.gross_weight," ",(0,b.jsx)("span",{className:"text-[10px]",children:"KG"})]})]}),(0,b.jsxs)("div",{className:"bg-emerald-50 border border-emerald-100 p-4 rounded-xl text-center",children:[(0,b.jsx)("p",{className:"text-[10px] text-emerald-600 font-bold uppercase",children:"Volume"}),(0,b.jsxs)("p",{className:"text-xl font-black text-emerald-900",children:[j.cbm," ",(0,b.jsx)("span",{className:"text-[10px]",children:"CBM"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:y,children:"Shipment Routing"}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100 space-y-6 relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start border-b border-slate-100 pb-4",children:[(0,b.jsxs)("span",{className:`px-3 py-1 rounded text-[10px] font-black uppercase tracking-wide ${"SEA"===j.transport_mode?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:[j.transport_mode," FREIGHT"]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:z,children:"Reference No"}),(0,b.jsx)("p",{className:"text-slate-900 font-mono font-bold bg-slate-100 px-2 py-0.5 rounded text-sm",children:v})]})]}),(0,b.jsxs)("div",{className:"relative pl-6 border-l-2 border-slate-200 space-y-8 ml-2",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute -left-[29px] top-1 w-4 h-4 rounded-full bg-blue-500 border-2 border-white shadow-sm"}),(0,b.jsx)("p",{className:z,children:"Port of Loading"}),(0,b.jsx)("p",{className:"text-xl font-black text-slate-900",children:j.port_loading})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute -left-[29px] top-1 w-4 h-4 rounded-full bg-slate-900 border-2 border-white shadow-sm"}),(0,b.jsx)("p",{className:z,children:"Port of Discharge"}),(0,b.jsx)("p",{className:"text-xl font-black text-slate-900",children:j.port_discharge})]})]}),w&&(0,b.jsxs)("div",{className:"mt-4 bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-start gap-3",children:[(0,b.jsx)("div",{className:"mt-1 text-blue-600",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-1",children:"Container / Vehicle Manifest"}),(0,b.jsx)("p",{className:"text-sm font-bold text-blue-900",children:w})]})]})]})]}),(0,b.jsx)("button",{onClick:x,className:"w-full text-red-400 hover:text-red-600 hover:bg-red-50 py-4 rounded-xl text-xs font-bold uppercase tracking-widest transition flex justify-center items-center gap-2",children:"Delete Job Permanently"})]})]})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3bf97d95._.js.map