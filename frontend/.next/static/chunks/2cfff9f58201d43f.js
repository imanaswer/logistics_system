(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,a,s)=>{a.exports=e.r(9187)},83168,e=>{"use strict";let a=e.i(39057).default.env.NEXT_PUBLIC_API_URL||"https://logistics-system-oq8b.onrender.com";console.log("ðŸ”— Backend API URL:",a),e.s(["API_URL",0,a])},88323,e=>{"use strict";var a=e.i(48277),s=e.i(30668),t=e.i(18033),l=e.i(96086),r=e.i(83168);function n(){let e=(0,l.useRouter)(),[n,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[b,g]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[N,f]=(0,s.useState)("SEA"),[w,y]=(0,s.useState)(""),[C,S]=(0,s.useState)(""),[k,A]=(0,s.useState)(""),[_,L]=(0,s.useState)(""),[P,I]=(0,s.useState)([]),[T,E]=(0,s.useState)(""),[R,$]=(0,s.useState)(""),[F,B]=(0,s.useState)(""),[U,V]=(0,s.useState)(""),[q,D]=(0,s.useState)(new Date().toISOString().split("T")[0]),[M,z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){window.location.href="/login";return}(async()=>{try{let a=await t.default.get(`${r.API_URL}/api/clients/`,{headers:{Authorization:`Token ${e}`}});i(a.data)}catch(e){console.error("Error fetching clients",e)}})()},[]);let J=async a=>{a.preventDefault(),z(!0);let s=localStorage.getItem("token");if(!s){window.location.href="/login";return}if(!c.trim()){alert("Client Name is required."),z(!1);return}let l="";if(P.length>0){let e={};P.forEach(a=>{e[a]=(e[a]||0)+1});let a=Object.entries(e).map(([e,a])=>`${a}x ${e}`).join(", ");l=` (${a})`}let n=k.trim()||"",i=_.trim()||"",o=`${n} || ${i}${l}`,d={job_date:q,vat_number:j,invoice_no:n,client:{name:c,phone:h||"N/A",email:m||null,address:b||"",vat_number:j},transport_mode:N,port_loading:w,port_discharge:C,shipment_invoice_no:o,no_of_packages:parseFloat(T)||0,gross_weight:parseFloat(R)||0,net_weight:parseFloat(F)||0,cbm:parseFloat(U)||0};try{await t.default.post(`${r.API_URL}/api/jobs/`,d,{headers:{Authorization:`Token ${s}`}}),alert("âœ… Job Created Successfully!"),e.push("/")}catch(e){z(!1),alert("Error saving job card.")}},O="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6",K="block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5",W="w-full p-3 rounded-lg border border-slate-200 font-bold text-slate-900 bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition";return(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 p-6 flex justify-center font-sans",children:(0,a.jsxs)("div",{className:"w-full max-w-4xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Create New Job Card"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 font-medium mt-1",children:"Enter shipment details to generate a job card."})]}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"text-slate-500 hover:text-red-600 font-bold text-sm bg-slate-100 px-4 py-2 rounded-lg transition",children:"Cancel"})]}),(0,a.jsxs)("form",{onSubmit:J,className:"space-y-6",children:[(0,a.jsxs)("div",{className:O,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Customer Information"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:K,children:["Customer Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",required:!0,value:c,onChange:e=>{u(e.target.value),d(!0)},onFocus:()=>d(!0),className:W,placeholder:"Type to search saved companies..."}),o&&c.length>0&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-xl shadow-2xl max-h-60 overflow-y-auto",children:n.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())).map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{u(e.name),v(e.vat_number||""),x(e.phone||""),p(e.email||""),g(e.address||""),d(!1)},className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-slate-50 last:border-none transition-colors",children:[(0,a.jsx)("div",{className:"text-sm font-black text-slate-900",children:e.name}),(0,a.jsxs)("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["VAT: ",e.vat_number||"N/A"," â€¢ ",e.address?.substring(0,40),"..."]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"VAT Number"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>v(e.target.value),className:W,placeholder:"Ex: 123456789"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Phone Number"}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:W,placeholder:"+968..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Email Address"}),(0,a.jsx)("input",{type:"email",value:m,onChange:e=>p(e.target.value),className:W,placeholder:"client@example.com"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:K,children:"Full Address"}),(0,a.jsx)("textarea",{value:b,onChange:e=>g(e.target.value),className:W,rows:2,placeholder:"Building, Street, City..."})]})]})]}),(0,a.jsxs)("div",{className:O,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Shipment Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Transport Mode"}),(0,a.jsxs)("select",{value:N,onChange:e=>{f(e.target.value),I([])},className:W,children:[(0,a.jsx)("option",{value:"SEA",children:"Sea Freight"}),(0,a.jsx)("option",{value:"AIR",children:"Air Freight"}),(0,a.jsx)("option",{value:"LAND",children:"Land Freight"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Job Date"}),(0,a.jsx)("input",{type:"date",required:!0,value:q,onChange:e=>D(e.target.value),className:W})]}),(0,a.jsxs)("div",{className:"md:col-span-2 bg-slate-50 p-4 rounded-xl border border-slate-200",children:[(0,a.jsx)("label",{className:K,children:"Select Containers / Vehicle Type"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:["1x20 ft dry","1x40 ft dry","1x20 ft reefer","1x40 ft reefer","3 ton reefer","3 ton normal","10 ton reefer","10 ton normal"].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{I([...P,e])},className:"text-[11px] font-bold uppercase bg-white text-slate-800 border-2 border-slate-300 px-3 py-2 rounded-lg hover:border-blue-500 transition shadow-sm",children:["+ ",e]},e))}),P.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 bg-white p-3 rounded-lg border border-blue-100 shadow-sm",children:P.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-900 px-3 py-1.5 rounded-lg text-xs font-bold border border-blue-100",children:[(0,a.jsxs)("span",{children:["ðŸ“¦ ",e]}),(0,a.jsx)("button",{type:"button",onClick:()=>{let e;(e=[...P]).splice(s,1),I(e)},className:"text-blue-300 hover:text-red-600 font-black px-1 text-sm",children:"Ã—"})]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Place of Loading"}),(0,a.jsx)("input",{type:"text",required:!0,value:w,onChange:e=>y(e.target.value),className:W,placeholder:"Ex: Jebel Ali..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Place of Discharge"}),(0,a.jsx)("input",{type:"text",required:!0,value:C,onChange:e=>S(e.target.value),className:W,placeholder:"Ex: Sohar..."})]}),(0,a.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-6 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Invoice Number"}),(0,a.jsx)("input",{type:"text",value:k,onChange:e=>A(e.target.value),className:W,placeholder:"INV-2026-001..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Supplier Reference"}),(0,a.jsx)("input",{type:"text",value:_,onChange:e=>L(e.target.value),className:W,placeholder:"PO Number / Ref..."})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-slate-100 grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Packages"}),(0,a.jsx)("input",{type:"number",value:T,onChange:e=>E(e.target.value),className:W,placeholder:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Gross Wt (KG)"}),(0,a.jsx)("input",{type:"number",value:R,onChange:e=>$(e.target.value),className:W,placeholder:"0.0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Net Wt (KG)"}),(0,a.jsx)("input",{type:"number",value:F,onChange:e=>B(e.target.value),className:W,placeholder:"0.0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:K,children:"Volume (CBM)"}),(0,a.jsx)("input",{type:"number",value:U,onChange:e=>V(e.target.value),className:W,placeholder:"0.0"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"submit",disabled:M,className:"bg-slate-900 hover:bg-black text-white text-base font-bold py-4 px-12 rounded-xl shadow-lg transition transform active:scale-[0.98] w-full md:w-auto",children:M?"Processing...":"Create Job Card"})})]})]})})}e.s(["default",()=>n])}]);