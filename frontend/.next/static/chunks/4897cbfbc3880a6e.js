(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,a,s)=>{a.exports=e.r(9187)},83168,e=>{"use strict";let a="https://trans-tracker-4.preview.emergentagent.com";console.log("ðŸ”— Backend API URL:",a),e.s(["API_URL",0,a])},21100,e=>{"use strict";var a=e.i(48277),s=e.i(30668),t=e.i(18033),l=e.i(96086),r=e.i(83168);function n(){let e=(0,l.useRouter)(),[n,i]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[g,b]=(0,s.useState)("SEA"),[j,v]=(0,s.useState)(""),[N,f]=(0,s.useState)(""),[w,C]=(0,s.useState)(""),[S,y]=(0,s.useState)(""),[k,A]=(0,s.useState)(""),[_,R]=(0,s.useState)(""),[L,P]=(0,s.useState)(""),[E,F]=(0,s.useState)(new Date().toISOString().split("T")[0]),[I,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{localStorage.getItem("token")||(window.location.href="/login")},[]);let B=async a=>{a.preventDefault(),T(!0);let s=localStorage.getItem("token");if(!s){window.location.href="/login";return}if(!n.trim()){alert("Client Name is required."),T(!1);return}let l=parseFloat(S)||0,i=parseFloat(k)||0,d=parseFloat(_)||0,u=parseFloat(L)||0;try{await t.default.post(`${r.API_URL}/api/jobs/`,{job_date:E,vat_number:m,client:{name:n,phone:o||"N/A",email:c||null,address:h||"",vat_number:m},transport_mode:g,port_loading:j,port_discharge:N,shipment_invoice_no:w,no_of_packages:l,gross_weight:i,net_weight:d,cbm:u},{headers:{Authorization:`Token ${s}`}}),alert("âœ… Job Created Successfully!"),e.push("/")}catch(e){if(console.error("FULL ERROR:",e),T(!1),e.response){let a=JSON.stringify(e.response.data,null,2);alert(`Server Rejected Request:
${a}`),401===e.response.status&&(window.location.href="/login")}else alert("Network Error: Could not reach the server.")}},q="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6",D="block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5",J="w-full p-3 rounded-lg border border-slate-200 font-bold text-slate-900 bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition";return(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 p-6 flex justify-center font-sans",children:(0,a.jsxs)("div",{className:"w-full max-w-4xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Create New Job Card"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 font-medium mt-1",children:"Enter shipment details to generate a job card."})]}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"text-slate-500 hover:text-red-600 font-bold text-sm bg-slate-100 hover:bg-red-50 px-4 py-2 rounded-lg transition",children:"Cancel"})]}),(0,a.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,a.jsxs)("div",{className:q,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Customer Information"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:D,children:["Customer Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",required:!0,value:n,onChange:e=>i(e.target.value),className:J,placeholder:"Company or Person Name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"VAT Number"}),(0,a.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:J,placeholder:"Ex: 123456789"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Phone Number"}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),className:J,placeholder:"+968..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Email Address"}),(0,a.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),className:J,placeholder:"client@example.com"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:D,children:"Full Address"}),(0,a.jsx)("textarea",{value:h,onChange:e=>x(e.target.value),className:J,rows:2,placeholder:"Building, Street, City..."})]})]})]}),(0,a.jsxs)("div",{className:q,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Shipment Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Transport Mode"}),(0,a.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:J,children:[(0,a.jsx)("option",{value:"SEA",children:"Sea Freight"}),(0,a.jsx)("option",{value:"AIR",children:"Air Freight"}),(0,a.jsx)("option",{value:"LAND",children:"Land Freight"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Job Date"}),(0,a.jsx)("input",{type:"date",required:!0,value:E,onChange:e=>F(e.target.value),className:J})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Port of Loading"}),(0,a.jsx)("input",{type:"text",required:!0,value:j,onChange:e=>v(e.target.value),className:J,placeholder:"Ex: Jebel Ali"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Port of Discharge"}),(0,a.jsx)("input",{type:"text",required:!0,value:N,onChange:e=>f(e.target.value),className:J,placeholder:"Ex: Sohar Port"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:D,children:"Reference / Invoice No"}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>C(e.target.value),className:J,placeholder:"Will be auto-filled if blank"})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-slate-100 grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Packages"}),(0,a.jsx)("input",{type:"number",value:S,onChange:e=>y(e.target.value),className:J,placeholder:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Gross Wt (KG)"}),(0,a.jsx)("input",{type:"number",value:k,onChange:e=>A(e.target.value),className:J,placeholder:"0.0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Net Wt (KG)"}),(0,a.jsx)("input",{type:"number",value:_,onChange:e=>R(e.target.value),className:J,placeholder:"0.0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:D,children:"Volume (CBM)"}),(0,a.jsx)("input",{type:"number",value:L,onChange:e=>P(e.target.value),className:J,placeholder:"0.0"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"submit",disabled:I,className:"bg-slate-900 hover:bg-black text-white text-base font-bold py-4 px-12 rounded-xl shadow-lg hover:shadow-xl transition transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed w-full md:w-auto",children:I?"Processing...":"Create Job Card"})})]})]})})}e.s(["default",()=>n])}]);